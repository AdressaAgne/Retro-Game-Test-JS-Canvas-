"use strict";function changeOnUse(e,t,i,n){e.block_id==t&&(Engine.changeInvetoryItem(n),e.block_id=i,resetAnimation(e))}function removeOnUse(e,t,i){e.block_id==t&&(Engine.removeSelectedInvetoryitem(),e.block_id=i,resetAnimation(e))}function resetAnimation(e){e.animCount=0}function addItem(e,t){MapObjects[e]=t}function onAction(e,t,i){i===Engine.facing&&"function"==typeof Engine.fullMap[e][t].block_id.onAction&&(Engine.fullMap[e][t].block_id.onAction.bind(Engine.fullMap[t])(),Engine.fullMap[e][t].isSearched=!0)}function onUse(e,t,i){if(i===Engine.facing&&0!=Engine.invetory.length&&"undefined"!=typeof MapObjects[Engine.invetory[Engine.selectedInvetorySlot].uuid].onUse){var n=Engine.invetory[Engine.selectedInvetorySlot].uuid;MapObjects[n].onUse.bind(Engine.fullMap[e][t])()}}function updatePosition(e,t,i){"function"==typeof Engine.fullMap[e][t].block_id.onWalkOver&&i?Engine.fullMap[e][t].block_id.onWalkOver.bind(Engine.fullMap[e][t])():"function"!=typeof Engine.fullMap[e][t].block_id.onSolidHit||i||Engine.fullMap[e][t].block_id.onSolidHit.bind(Engine.fullMap[e][t])()}function componentToHex(e){var t=e.toString(16);return 1==t.length?"0"+t:t}function rgbToHex(e,t,i){return componentToHex(e)+componentToHex(t)+componentToHex(i)}function baseName(e){var t=new String(e).substring(e.lastIndexOf("/")+1);return-1!=t.lastIndexOf(".")&&(t=t.substring(0,t.lastIndexOf("."))),t}function rng(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function animate(){Engine.allowRender&&requestAnimFrame(animate);var e=Engine.fullMap,t=Engine.GetPlayerCords(),i=t.x,n=t.y;if(Engine.walk(keyCodes.w,1,Engine.walkingDist),Engine.walk(keyCodes.s,3,Engine.walkingDist),Engine.walk(keyCodes.a,0,Engine.walkingDist),Engine.walk(keyCodes.d,2,Engine.walkingDist),pressedKeys[keyCodes.e]){onAction(i,n-1,1),onAction(i,n+1,3),onAction(i+1,n,2),onAction(i-1,n,0),pressedKeys[keyCodes.e]=!1;var s=Engine.fullMap[i][n];"function"==typeof s.block_id.onActionOver&&s.block_id.onActionOver.bind(s)(),"function"==typeof s.block_id.onUseOver&&s.block_id.onUseOver.bind(s)(),"undefiend"!=typeof s.block_id.canPickUp&&s.block_id.canPickUp&&Engine.addToInvetory(s.block_id)&&(s.block_id=ItemsList.dirt)}pressedKeys[keyCodes.q]&&(onUse(i,n-1,1),onUse(i,n+1,3),onUse(i+1,n,2),onUse(i-1,n,0),pressedKeys[keyCodes.q]=!1),pressedKeys[keyCodes.n0]&&(Engine.selectedInvetorySlot=9);for(var a=0;10>a;a++)pressedKeys[keyCodes["n"+(a+1)]]&&(Engine.selectedInvetorySlot=a);Engine.Render();var o=(Date.now()-timeFPS)/1e3;timeFPS=Date.now(),fps=1/o,drawFPS&&Engine.drawFPS(fps)}var MapObjects={};addItem("000000",{name:"wall",solid:!0,moveable:!1,alternative3D:function(){return[ItemsList.wall_edge]},type:"block",x:1,y:0}),addItem("484848",{name:"wall_edge",solid:!0,moveable:!1,type:"block",x:2,y:0}),addItem("3c3c3c",{name:"wall_below_edge",solid:!0,moveable:!1,type:"block",x:6,y:0}),addItem("776022",{name:"door",solid:!1,moveable:!1,type:"block",x:3,y:0}),addItem("ffffff",{name:"dirt",solid:!1,moveable:!1,type:"block",x:0,y:0}),addItem("00ff00",{name:"chest",solid:!1,moveable:!0,type:"item",x:0,y:9,onWalkOver:function(){Engine.loadNextMap("next")}}),addItem("ff0000",{name:"player",solid:!1,moveable:!1,type:"player",facing:[[{x:0,y:8},{x:1,y:8},{x:2,y:8}],[{x:0,y:6},{x:1,y:6},{x:2,y:6}],[{x:0,y:7},{x:1,y:7},{x:2,y:7}],[{x:0,y:5},{x:1,y:5},{x:2,y:5}]]}),addItem("00a000",{name:"hedge",solid:!0,moveable:!1,alternative3D:function(){return[ItemsList.hedge_edge,ItemsList.rose_hedge_edge]},type:"block",x:1,y:1}),addItem("009100",{name:"hedge_edge",solid:!0,moveable:!1,type:"block",x:2,y:1}),addItem("d500ff",{name:"rose_hedge_edge",solid:!0,moveable:!1,type:"block",x:4,y:1}),addItem("004f00",{name:"hedge_edge_door",solid:!1,moveable:!1,type:"block",x:3,y:1}),addItem("88293b",{name:"ruby",solid:!1,moveable:!1,type:"item",x:6,y:10,onWalkOver:function(){Engine.money+=25,this.block_id=ItemsList.dirt}}),addItem("f9e000",{name:"gold_coin",solid:!1,moveable:!1,type:"item",anim:[{x:3,y:10},{x:3,y:11},{x:3,y:12},{x:3,y:13},{x:3,y:12},{x:3,y:11}],onWalkOver:function(){Engine.money+=10,this.block_id=ItemsList.dirt}}),addItem("e5e5e5",{name:"silver_coin",solid:!1,moveable:!1,type:"item",anim:[{x:4,y:10},{x:4,y:11},{x:4,y:12},{x:4,y:13},{x:4,y:12},{x:4,y:11}],onWalkOver:function(){Engine.money+=5,this.block_id=ItemsList.dirt}}),addItem("cd6e28",{name:"bronze_coin",solid:!1,moveable:!1,type:"item",onWalkOver:function(){Engine.money++,this.block_id=ItemsList.dirt},anim:[{x:5,y:10},{x:5,y:11},{x:5,y:12},{x:5,y:13},{x:5,y:12},{x:5,y:11}]}),addItem("cd3f28",{name:"fire",solid:!0,moveable:!1,type:"item",anim:[{x:0,y:15},{x:1,y:15},{x:2,y:15}],onWalkOver:function(){console.log("au")}}),addItem("d13131",{name:"hp",solid:!1,moveable:!1,type:"item",x:0,y:11,onWalkOver:function(){console.log("au")}}),addItem("bada55",{name:"water_fall",solid:!0,moveable:!1,alternative3D:function(){return[ItemsList.water_fall_end]},type:"block",anim:[{x:14,y:0},{x:14,y:1}]}),addItem("98b244",{name:"water_fall_end",solid:!0,moveable:!1,type:"block",anim:[{x:15,y:0},{x:15,y:1}],onRender:function(){Engine.fullMap[this.x][this.y+1].block_id==ItemsList.dirt&&(Engine.fullMap[this.x][this.y+1].block_id=MapObjects[667731])}}),addItem("667731",{name:"water",solid:!0,moveable:!1,type:"block",anim:[{x:1,y:2},{x:2,y:2},{x:3,y:2},{x:4,y:2},{x:5,y:2}]}),addItem("ff6600",{name:"lava",solid:!0,moveable:!1,type:"block",anim:[{x:1,y:3},{x:2,y:3},{x:3,y:3},{x:4,y:3},{x:5,y:3}]}),addItem("2f91a6",{name:"Bucket",solid:!1,moveable:!1,type:"item",x:3,y:6,canPickUp:!0,onUse:function(){changeOnUse(this,ItemsList.water,ItemsList.dirt,ItemsList.bucket_filled_water),changeOnUse(this,ItemsList.swomp,ItemsList.dirt,ItemsList.bucket_filled_swomp),removeOnUse(this,ItemsList.lava,ItemsList.fire),changeOnUse(this,ItemsList.swomp_2,ItemsList.dirt,ItemsList.bucket_filled_swomp),changeOnUse(this,ItemsList.swomp_3,ItemsList.dirt,ItemsList.bucket_filled_swomp)}}),addItem("19454d",{name:"Bucket_Filled_Swomp",solid:!1,moveable:!1,type:"item",x:6,y:6,canPickUp:!0,onUse:function(){changeOnUse(this,ItemsList.dirt,ItemsList.swomp_2,ItemsList.bucket),changeOnUse(this,ItemsList.fire,ItemsList.dirt,ItemsList.bucket),changeOnUse(this,ItemsList.lava,ItemsList.dirt,ItemsList.bucket)}}),addItem("7d9ca2",{name:"Iron_Bucket",solid:!1,moveable:!1,type:"item",x:3,y:5,canPickUp:!0,onUse:function(){changeOnUse(this,ItemsList.water,ItemsList.dirt,ItemsList.iron_bucket_water),changeOnUse(this,ItemsList.lava,ItemsList.dirt,ItemsList.iron_bucket_lava),changeOnUse(this,ItemsList.swomp,ItemsList.dirt,ItemsList.iron_bucket_swomp),changeOnUse(this,ItemsList.swomp_2,ItemsList.dirt,ItemsList.iron_bucket_swomp),changeOnUse(this,ItemsList.swomp_3,ItemsList.dirt,ItemsList.iron_bucket_swomp)}}),addItem("6a868b",{name:"Iron_Bucket_Water",solid:!1,moveable:!1,type:"item",x:5,y:5,canPickUp:!0,onUse:function(){changeOnUse(this,ItemsList.dirt,ItemsList.water,ItemsList.iron_bucket),changeOnUse(this,ItemsList.fire,ItemsList.dirt,ItemsList.iron_bucket),removeOnUse(this,ItemsList.lava,ItemsList.dirt)}}),addItem("556b6f",{name:"Iron_Bucket_Lava",solid:!1,moveable:!1,type:"item",x:4,y:5,canPickUp:!0,onUse:function(){changeOnUse(this,ItemsList.dirt,ItemsList.lava,ItemsList.iron_bucket),changeOnUse(this,ItemsList.swomp,ItemsList.dirt,ItemsList.iron_bucket),changeOnUse(this,ItemsList.water,ItemsList.dirt,ItemsList.iron_bucket)}}),addItem("3e4f52",{name:"Iron_Bucket_Swomp",solid:!1,moveable:!1,type:"item",x:6,y:5,canPickUp:!0,onUse:function(){changeOnUse(this,ItemsList.dirt,ItemsList.swomp_2,ItemsList.iron_bucket),changeOnUse(this,ItemsList.fire,ItemsList.dirt,ItemsList.iron_bucket),changeOnUse(this,ItemsList.lava,ItemsList.dirt,ItemsList.iron_bucket)}}),addItem("256d7c",{name:"Bucket_Filled_Water",solid:!1,moveable:!1,type:"item",x:5,y:6,canPickUp:!0,onUse:function(){changeOnUse(this,ItemsList.dirt,ItemsList.water,ItemsList.bucket),changeOnUse(this,ItemsList.fire,ItemsList.dirt,ItemsList.bucket)}}),addItem("1e5661",{name:"Bucket Filled Lava",solid:!1,moveable:!1,type:"item",x:4,y:6,canPickUp:!0,onUse:function(){changeOnUse(this,ItemsList.water,ItemsList.dirt,ItemsList.bucket),changeOnUse(this,ItemsList.dirt,ItemsList.lava,ItemsList.bucket)}}),addItem("eddfae",{name:"Key",solid:!1,moveable:!1,type:"item",x:6,y:9,canPickUp:!0,onUse:function(){removeOnUse(this,ItemsList.door_closed,ItemsList.door_open)}}),addItem("745208",{name:"Door_Open",solid:!1,moveable:!1,type:"item",x:1,y:4}),addItem("513906",{name:"Door_Closed",solid:!0,moveable:!1,type:"item",x:0,y:4}),addItem("232e1d",{name:"Snake",drop:function(){return ItemsList.key},solid:!0,moveable:!1,type:"creature",anim:[{x:7,y:8},{x:7,y:8},{x:7,y:8},{x:6,y:8},{x:5,y:8},{x:6,y:8},{x:7,y:8},{x:7,y:8},{x:7,y:8}],onRenderFull:function(){"undefined"==typeof this.hp&&(this.hp=5),Engine.drawFromSprite(MapObjects.healthBar.anim[5-this.hp],this.x,this.y)}}),addItem("808080",{name:"Boulder",solid:!0,moveable:!1,type:"item",x:1,y:10,onSolidHit:function(){var e=this.x,t=this.y,i=Engine.facing;0==i&&--e,1==i&&--t,2==i&&++e,3==i&&++t,Engine.fullMap[e][t].block_id==ItemsList.dirt&&(Engine.fullMap[e][t].block_id=this.block_id,this.block_id=ItemsList.dirt),Engine.fullMap[e][t].block_id==ItemsList.water&&(Engine.fullMap[e][t].block_id=ItemsList.dirt,this.block_id=ItemsList.dirt)}}),addItem("healthBar",{name:"Health_Bar",solid:!1,moveable:!1,type:"item",anim:[{x:5,y:7},{x:6,y:7},{x:7,y:7},{x:8,y:7},{x:9,y:7}]}),addItem("b60808",{name:"Mushroom",solid:!0,moveable:!1,type:"item",x:7,y:9,onUse:function(){Engine.removeSelectedInvetoryitem()}}),addItem("464268",{name:"Bat",solid:!0,moveable:!1,type:"creature",drop:function(){return[ItemsList.gold_coin,ItemsList.silver_coin]},anim:[{x:8,y:8},{x:9,y:8},{x:10,y:8},{x:11,y:8},{x:12,y:8},{x:11,y:8},{x:10,y:8},{x:9,y:8}],onRender:function(){0==this.animCount&&Engine.moveRngBlock(this)},onRenderFull:function(){"undefined"==typeof this.hp&&(this.hp=5),Engine.drawFromSprite(MapObjects.healthBar.anim[5-this.hp],this.x,this.y)}}),addItem("a048dd",{name:"Dagger",solid:!1,moveable:!1,type:"item",x:3,y:9,canPickUp:!0,onUse:function(){if("creature"==this.block_id.type&&(this.hp--,this.hp<=0)){var e=this.block_id.drop();this.block_id=e[rng(0,e.length-1)],resetAnimation(this.block_id)}this.block_id==ItemsList.mushroom&&Engine.addToInvetory(this.block_id)&&(this.block_id=ItemsList.dirt)}}),addItem("7d5112",{name:"swomp",solid:!1,moveable:!1,type:"block",alternative:function(){return[ItemsList.swomp_2,ItemsList.swomp_3]},anim:[{x:6,y:2},{x:7,y:2},{x:8,y:2},{x:7,y:2}]}),addItem("swomp2",{name:"swomp_2",solid:!1,moveable:!1,type:"block",anim:[{x:6,y:3},{x:7,y:3},{x:8,y:3},{x:7,y:3}]}),addItem("swomp",{name:"swomp_3",solid:!1,moveable:!1,type:"block",anim:[{x:6,y:4},{x:7,y:4},{x:8,y:4},{x:7,y:4}]});var texture={sprite:"img/texture/textures.png",gui:"img/texture/gui.png",map1:"img/maps/1.gif",map2:"img/maps/2.gif",map3:"img/maps/3.gif",map4:"img/maps/4.gif",testMap:"img/maps/auto.gif"},keyCodes={w:87,s:83,a:65,d:68,e:69,q:81,n0:48,n1:49,n2:50,n3:51,n4:52,n5:53,n6:54,n7:55,n8:56,n9:57,esc:27,enter:13,space:32,ArrowDown:40,ArrowRight:39,ArrowUp:38,ArrowLeft:37},pressedKeys={};document.addEventListener("keydown",function(e){pressedKeys[e.keyCode]=!0}),document.addEventListener("keyup",function(e){pressedKeys[e.keyCode]=!1});var timeFPS,fps,drawFPS=!0;window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)}}();var Engine={canvas:document.getElementById("game"),ctx:document.getElementById("game").getContext("2d"),allowRender:!0,CurrentMap:null,currentMapNr:0,fullMap:{},startMap:4,fog:4,facing:3,count:0,maxCount:10,invetory:[],money:0,selectedInvetorySlot:0,player:{animCount:0,x:0,y:0,isWalking:!1},walkingDist:.1,gui:{height:192,width:0},Items:{},Render:function(e){var t=this.CurrentMap;Engine.ctx.clearRect(0,0,64*this.CurrentMap.width,64*this.CurrentMap.height),this.ImageSmoothing(!1);for(var i in this.fullMap)if(this.fullMap.hasOwnProperty(i))for(var n in this.fullMap[i]){var s=this.fullMap[i][n];"undefined"==typeof s.block_id&&(console.log(s),this.allowRender=!1),"player"!=s.block_id.type&&"item"!=s.block_id.type&&"creature"!=s.block_id.type||this.drawFromSprite(MapObjects.ffffff,s.x,s.y),"undefined"!=typeof s.block_id.anim?("undefined"==typeof s.animCount&&(s.animCount=rng(0,s.block_id.anim.length-3)),this.drawFromAnimSprite(s.block_id.anim[s.animCount],s.x,s.y),0==this.count&&(++s.animCount,s.animCount>=s.block_id.anim.length&&(s.animCount=0))):(this.drawFromSprite(s.block_id,s.x,s.y),this.drawFromSprite(s.block_id,s.x,s.y)),"function"==typeof s.block_id.onRender&&0==this.count&&s.block_id.onRender.bind(s)(),"function"==typeof s.block_id.onRenderFull&&s.block_id.onRenderFull.bind(s)()}this.RenderPlayer(s),this.RenderFog(),this.RenderGUI(),this.count=this.count>=this.maxCount?0:this.count+1},ImageSmoothing:function(e){this.ctx.mozImageSmoothingEnabled=e,this.ctx.webkitImageSmoothingEnabled=e,this.ctx.msImageSmoothingEnabled=e,this.ctx.imageSmoothingEnabled=e},Open:function(e){this.allowRender=!1;var t=document.createElement("canvas"),i=t.getContext("2d");t.width=e.width,t.height=e.height,this.canvas.width=64*e.width+this.gui.width,this.canvas.height=64*e.height+this.gui.height,i.drawImage(e,0,0);for(var n={width:e.width,height:e.height},s=0;s<e.width;s++){this.fullMap[s]={};for(var a=0;a<e.height;a++){var o=i.getImageData(s,a,1,1).data,r=rgbToHex(o[0],o[1],o[2]),d={x:s,y:a,block_id:MapObjects[r],color:r};if("ff0000"==r){this.player.x=s,this.player.y=a;var d={x:s,y:a,block_id:MapObjects.ffffff,color:r}}this.fullMap[s][a]=d}}for(var s=0;s<e.width;s++)for(var a=0;a<e.height;a++){var l=this.fullMap[s][a];if("undefined"!=typeof l.block_id.alternative3D&&"undefined"!=typeof this.fullMap[s][a+1]&&(0!=this.fullMap[s][a+1].block_id.solid&&"water"!=this.fullMap[s][a+1].block_id.name&&"lava"!=this.fullMap[s][a+1].block_id.name||(this.fullMap[s][a].block_id=l.block_id.alternative3D()[rng(0,l.block_id.alternative3D().length-1)])),"undefined"!=typeof l.block_id.alternative){var m=l.block_id.alternative();m.push(l.block_id),l.block_id=m[rng(0,m.length-1)]}}return this.allowRender=!0,n},init:function(){this.canvas.width=1024,this.canvas.height=1024,this.drawLoading("Loading... 0%");var e=Object.keys(texture).length,t=0;for(var i in texture)if(texture.hasOwnProperty(i)){var n=texture[i];texture[i]=new Image,texture[i].src=n,texture[i].onload=function(i){t++,this.drawLoading("Loading... "+parseInt(t/e*100)+"% ("+i+")"),t===e&&(this.fog=Maps[this.startMap].fog,this.CurrentMap=this.Open(Maps[this.startMap].file),animate())}.bind(this)}}};Engine.RenderFog=function(){var e=this.CurrentMap.width,t=this.CurrentMap.height,i=this.player.x,n=this.player.y,s=this.fog/2;this.ctx.clearRect(0,0,64*(e-(e-i)-s),64*t),this.ctx.clearRect(0,0,64*e,64*(t-(t-n)-s)),this.ctx.clearRect(0,64*(t-(t-n-s-1)),64*e,64*t),this.ctx.clearRect(64*(e-(e-i-s-1)),0,64*e,64*t)},Engine.RenderGUI=function(){this.ctx.drawImage(texture.gui,0,0,256,48,0,1024,1024,192),this.drawFromSprite(this.RenderStill("cd6e28"),.5,16.5),this.drawFromSprite(MapObjects.d13131,this.CurrentMap.width-1.5,16.5),this.drawFromSprite(MapObjects.d13131,this.CurrentMap.width-2.5,16.5),this.drawFromSprite(MapObjects.d13131,this.CurrentMap.width-3.5,16.5),this.RenderText("#f8f8f8",this.money,1.5,17.15);for(var e=10,t=0;e>t;t++)this.ctx.drawImage(texture.gui,0,48,21,21,24+21*t*4+-4*t,1124,94,84);this.ctx.drawImage(texture.gui,21,48,23,23,19+92*this.selectedInvetorySlot+-11*this.selectedInvetorySlot,1120,92,92);for(var t=0;t<this.invetory.length;t++)this.drawToInventory(this.invetory[t],t)},Engine.RenderPlayer=function(){this.drawPlayer(this.player.x,this.player.y)},Engine.RenderStill=function(e){return"undefined"!=typeof MapObjects[e].anim[0]?MapObjects[e].anim[0]:MapObjects[e]},Engine.RenderText=function(e,t,i,n){this.ctx.fillStyle=e,this.ctx.font="34px Verdana",this.ctx.fillText(t,64*i,64*n)},Engine.drawFPS=function(){this.RenderText("#f8f8f8",parseInt(fps),25,50)},Engine.drawLoading=function(e){this.ctx.clearRect(0,0,1024,1024),this.RenderText("#f8f8f8",e,25,50),console.info(e)},Engine.drawMenu=function(){},Engine.drawDeathScrenn=function(){},Engine.drawToInventory=function(e,t){this.ctx.drawImage(texture.sprite,16*e.x,16*e.y,16,16,34+84*t-4*t,1132,64,64)},Engine.drawPlayer=function(e,t){var i=MapObjects.ff0000;"undefined"==typeof this.player.animCount&&(this.player.animCount=0),this.player.animCount>=i.facing[this.facing].length&&(this.player.animCount=0),this.player.isWalking?this.ctx.drawImage(texture.sprite,16*i.facing[this.facing][this.player.animCount].x,16*i.facing[this.facing][this.player.animCount].y,16,16,64*e,64*t-16,64,64):this.ctx.drawImage(texture.sprite,16*i.facing[this.facing][this.player.animCount].x,16*i.facing[this.facing][this.player.animCount].y,16,16,64*e,64*t-16,64,64),0==this.count&&this.player.animCount++},Engine.drawFromSprite=function(e,t,i){this.ctx.drawImage(texture.sprite,16*e.x,16*e.y,16,16,64*t,64*i,64,64)},Engine.drawFromAnimSprite=function(e,t,i){this.ctx.drawImage(texture.sprite,16*e.x,16*e.y,16,16,64*t,64*i,64,64)},Engine.moveRngBlock=function(e){this.moveBlockDirection(e,rng(0,3))},Engine.moveBlockDirection=function(e,t){var i=e.x,n=e.y;0==t&&--i,1==t&&--n,2==t&&++i,3==t&&++n;var s=this.fullMap[i][n];s.block_id.solid||"undefined"!=typeof s.block_id&&s.block_id===MapObjects.ffffff&&this.switchBlock(e,s)},Engine.switchBlock=function(e,t){},Engine.loadNextMap=function(){this.currentMapNr=Maps[this.currentMapNr].next,this.fog=Maps[this.currentMapNr].fog,this.invetory=[],this.LoadNewMap(Maps[this.currentMapNr].file)},Engine.MapGoLevelDown=function(){return Maps[this.currentMapNr].levels.length>=0?!1:(this.currentMapNr=Maps[this.currentMapNr].levels[Maps[this.currentMapNr].currentLevel-1],void this.LoadNewMap(Maps[this.currentMapNr]))},Engine.MapGoLevelUp=function(){return Maps[this.currentMapNr].levels.length<=Maps[this.currentMapNr].levels.length?!1:(this.currentMapNr=Maps[this.currentMapNr].levels[Maps[this.currentMapNr].currentLevel+1],void this.LoadNewMap(Maps[this.currentMapNr]))},Engine.LoadNewMap=function(e){this.CurrentMap=this.Open(e)},Engine.walk=function(e,t,i){if(pressedKeys[e]){if(this.facing!==t)return void(this.facing=t);var n=this.GetPlayerCords(),s=n.x,a=n.y;if(0==t&&--s,1==t&&--a,2==t&&++s,3==t&&++a,!this.fullMap[s][a].block_id.solid&&0==this.count)return 0!=t&&2!=t||(this.player.x=s),1!=t&&3!=t||(this.player.y=a),this.player.isWalking=!0,void updatePosition(s,a,!0);this.player.isWalking=!1,updatePosition(s,a,!1)}},Engine.GetPlayerCords=function(){var e=Math.floor(this.player.x),t=Math.floor(this.player.y);return{x:e,y:t}},Engine.addToInvetory=function(e){return this.invetory.length>10?!1:(this.invetory.push(e),!0)},Engine.changeInvetoryItem=function(e){return"undefined"==typeof this.invetory[this.selectedInvetorySlot]?!1:(this.invetory[this.selectedInvetorySlot]=e,!0)},Engine.removeSelectedInvetoryitem=function(){this.invetory.splice(this.selectedInvetorySlot,1)},Engine.init();var Maps=[{name:"level 1",file:texture.map1,next:1,fog:10,startLevel:0,currentLevel:0,levels:[texture.map1,texture.map2]},{name:"level 2",file:texture.map2,next:2,fog:8},{name:"level 3",file:texture.map3,next:0,fog:6},{name:"Kjetil bane",file:texture.map4,next:0,fog:6},{name:"Testing Map",file:texture.testMap,next:0,fog:30}],ItemsList={};for(var item in MapObjects)if(MapObjects.hasOwnProperty(item)){var id=MapObjects[item].name.toLowerCase();ItemsList[id]=MapObjects[item],ItemsList[id].uuid=item}
//# sourceMappingURL=./main-min.js.map